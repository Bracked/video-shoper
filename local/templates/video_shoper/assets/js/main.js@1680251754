'use strict';init_tippys();$('.tab-nav li').on('click',function(){var ind=$(this).index();$(this).parents('.tabs').find('.tab-nav li.active').removeClass('active');$(this).addClass('active');$(this).parents('.tabs').find('.tab-content:visible').hide().removeClass('active');$(this).parents('.tabs').find('.tab-content').eq(ind).fadeIn('fast').addClass('active');$(this).parents('.tabs').find('.tab-content .slick-slider').slick('setPosition');});$('.tabs .tab-content .mob-toggle').on('click',function name(params){var el=$(this);if($(this).siblings('.inner').is(':visible')){$(this).removeClass('open').siblings('.inner').slideUp('fast');}else{$(this).addClass('open').siblings('.inner').slideDown();$(this).parents('.tabs').find('.tab-content .slick-slider').slick('setPosition');$('body,html').animate({scrollTop:el.offset().top,},700);}});$('iframe[src*="youtube.com"]').each(function(){var $this=$(this);if(!$this.parent().hasClass('video-container')){$this.wrap('<div class="video-container"></div>');}});let lazyYoutubeVideoCount=0;$('iframe[lazy-src]').each(function(){let $this=$(this);if($this.is('[lazy-src*="youtube.com"]')){if(!$this.parent().hasClass('video-container')){$this.wrap('<div class="video-container"></div>');}
let youtubeId=/\/embed\/([^?]+)/g.exec($this.attr('lazy-src')).pop();$this.replaceWith(`<div class="youtube-preloader" id="youtube-preloader-${lazyYoutubeVideoCount}" lazy-youtube-src="${youtubeId}" style="background-image: url(//i.ytimg.com/vi/${youtubeId}/maxresdefault.jpg)"></div>`);lazyYoutubeVideoCount++;}else{$this.attr('src',$this.attr('lazy-src'));$this.removeAttr('lazy-src');}});if(lazyYoutubeVideoCount){let tag=document.createElement('script');tag.src='https://www.youtube.com/iframe_api';let firstScriptTag=document.getElementsByTagName('script')[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);$('.youtube-preloader').click(function(){if(typeof YT.Player==='function'){let $this=$(this);new YT.Player($this.attr('id'),{height:Math.ceil($this.height()).toString(),width:Math.ceil($this.width()).toString(),videoId:$this.attr('lazy-youtube-src'),playerVars:{playsinline:1,autoplay:1,},});}});}
if($('.js-sale-countdown').length){$('.js-sale-countdown').each(function(){$(this).countdown(parseInt($(this).data('until')),{elapse:true,precision:300,defer:false,}).on('update.countdown',function(e){this.innerHTML=e.strftime('%H:%M:%S');});});}
function isEmail(email){var regex=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return regex.test(email);}
$('.email-check').on('blur',function(){var email=$(this).val();if(isEmail(email)){$(this).removeClass('not-valid');}else{$(this).addClass('not-valid');}});$('.show-more-rev').on('click',function(e){e.preventDefault();$('.reviews-list .item:hidden').show();$(this).hide();});$('.faq-list .question').on('click',function(params){$(this).toggleClass('open').siblings('.answer').slideToggle();});if($(window).width()<768){$('.deliv-list ul li').each(function(params){if($(this).index()>20){$(this).hide();}});$('<a></a>',{href:'#',class:'show-more',}).html('Показать еще').on('click',function(e){e.preventDefault();$('.deliv-list ul li').show();$(this).hide();}).insertAfter('.deliv-list ul');}
$('.list-of-sets .item-desc').each(function(){var h=$(this).height();if(h>22){$(this).addClass('cuted');}});$('.list-of-sets .item').on('click',function(event){if(!$(event.target).closest('.buy-btn').length){if($(this).hasClass('active')&&$(this).find('.item-desc').height()>22){$(this).removeClass('active');$(this).find('.item-desc').addClass('cuted');}else{$(this).addClass('active');$(this).find('.item-desc').removeClass('cuted');}}});$('.product-item .prod-actions li a').on('click',function(e){e.preventDefault();$(this).toggleClass('active');});$('.all-specs').on('click',function(e){e.preventDefault();$('body,html').animate({scrollTop:$('.tabs').offset().top,},500);if($(window).width()>767){$('.tabs').find('.tab-content:visible').hide().removeClass('active');$('.tab-nav li.active').removeClass('active');$('.tab-nav li[data-tabname="features"]').addClass('active');$('.tabs').find('.tab-content[data-tabname="features"]').fadeIn('fast').addClass('active');}else{$('.tabs').find('.inner:visible').hide().siblings('.mob-toggle').removeClass('open');$('.tabs').find('.tab-content[data-tabname="features"]').find('.inner').slideDown('fast');$('.tabs').find('.tab-content[data-tabname="features"]').find('.mob-toggle').addClass('open');}});$('.checkbox-list .show-all').on('click',function(e){e.preventDefault();if($(this).parent().hasClass('showed')){$(this).text('Показать все').parent().removeClass('showed');var ll=$(this).siblings('ul').children('li').length;for(let i=5;i<ll;i++){$(this).siblings('ul').children('li').eq(i).hide();}}else{$(this).text('Скрыть').parent().addClass('showed');$(this).siblings('ul').children('li').show();}});$('.filter-block .block-title').on('click',function(){if($(this).siblings('.inner').is(':visible')){$(this).siblings('.inner').slideUp().parent().removeClass('opened');}else{$(this).siblings('.inner').slideDown().parent().addClass('opened');}});const $sliderRange=$('#slider-range');if($sliderRange.length){var p_min=parseInt($sliderRange.attr('data-min'));var p_max=parseInt($sliderRange.attr('data-max'));var p_from=parseInt($sliderRange.attr('data-from'));var p_to=parseInt($sliderRange.attr('data-to'));$sliderRange.slider({range:true,min:p_min,max:p_max,values:[p_from,p_to],slide:function(event,ui){$('#priceFrom').val(ui.values[0]);$('#priceTo').val(ui.values[1]);},});$('#priceFrom').val($sliderRange.slider('values',0));$('#priceTo').val($sliderRange.slider('values',1));$('#priceFrom').on('change',function(){$sliderRange.slider('values',0,$(this).val());});$('#priceTo').on('change',function(){$sliderRange.slider('values',1,$(this).val());});}
$('.range-slider').each(function(){const $rangeSlider=$(this);$rangeSlider.slider({range:true,min:parseInt($rangeSlider.attr('data-min')),max:parseInt($rangeSlider.attr('data-max')),values:[parseInt($rangeSlider.attr('data-from')),parseInt($rangeSlider.attr('data-to'))],slide:function(event,ui){$(this).siblings('.from').html(ui.values[0]);$(this).siblings('.to').html(ui.values[1]);},});});$('.compare-view li').on('click',function(e){e.preventDefault();$('.compare-view li.active').removeClass('active');$(this).addClass('active');});$('.client-type label').on('click',function(){var v=$('.client-type label input:checked').val();$('.client-final').hide();$('.client-final[data-type="'+v+'"]').show();});$('.phone-input').inputmask({mask:'+7 (999) 999-99-99'});$('.numb-only').inputFilter(function(value){return /^\d*$/.test(value);});const $prodList=$('.prod-list');if($prodList.length){if($(window).width()>1023){$('.header-actions li .show-list').on('click',function(e){e.preventDefault();$prodList.hide();$(this).siblings('.prod-list').fadeIn('fast');});}
$('.prod-list .close-this').on('click',function(params){$(this).parents('.prod-list').hide();});$(document).on('click',function(event){if(!$(event.target).closest('.header-actions li .show-list, .prod-list').length){$prodList.hide();}});}
if($(window).width()>1199){$('.header .fast-links').mCustomScrollbar({axis:'x',advanced:{autoExpandHorizontalScroll:true},});}
if($(window).width()<1024){$('.tabs .tab-nav-wrap').mCustomScrollbar({axis:'x',advanced:{autoExpandHorizontalScroll:true},});}
$('.footer .footer-top .col-title').on('click',function(params){$(this).toggleClass('open').siblings('ul').toggle();});$('.products-wrap .open-filter').on('click',function(params){$('.sidebar').addClass('open');$('body').addClass('no-scroll');});$('.close-filter').on('click',function(params){$('.sidebar').removeClass('open');$('body').removeClass('no-scroll');});$('.section-catalog-products .products-wrap .sort-block .current').on('click',function(e){e.preventDefault();if($(this).siblings('ul').is(':visible')){$(this).removeClass('active').siblings('ul').hide();}else{$(this).addClass('active').siblings('ul').slideDown('fast');}});if($(window).width()<768){$('.list-of-sets').appendTo('.product-main__cols .col:first-child');}
$('.second-mob-toggle').on('click',function(params){$('.header.second .second-menu').toggle();});if($(window).width()<768){var t=$('.wrap-header .block-nav li.active a').html();$('.wrap-header .dropdown .current').html(t).on('click',function(e){e.preventDefault();if($(this).siblings('ul').is(':visible')){$(this).removeClass('open').siblings('ul').slideUp('fast');}else{$(this).addClass('open').siblings('ul').slideDown('fast');}});$('.wrap-header .dropdown li').on('click',function(params){var tn=$(this).find('a').html();$('.wrap-header .dropdown li.active').removeClass('active');$('.wrap-header .dropdown .current').removeClass('open').html(tn);$(this).addClass('active');$(this).parents('ul').slideUp('fast');});}
$(document).on('click',function(event){if(!$(event.target).closest('.wrap-header .dropdown .current, .wrap-header .dropdown ul').length&&$(window).width()<768){$('.wrap-header .dropdown ul').hide();$('.wrap-header .dropdown .current').removeClass('open');}});const rows=document.querySelectorAll('.prod-specs ul li').length;for(let n=1;n<=rows;++n){let cells=document.querySelectorAll('.prod-specs ul li:nth-child('+n+')');let maxHeight=0;for(let i=0;i<cells.length;++i){maxHeight=cells[i].clientHeight>maxHeight?cells[i].clientHeight:maxHeight;}
cells.forEach(function(cell){cell.style.height=Number(maxHeight)+'px';});}
if($('.compare-wrap > .compare-list').length>0){$(window).on('scroll',function(params){var cs=$(window).scrollTop();var elOf=$('.compare-wrap > .compare-list').offset().top;if(cs>elOf){$('.compare-fix-header').addClass('active');}else{$('.compare-fix-header').removeClass('active');}
var cwh=$('.compare-wrap').height();var cwot=$('.compare-wrap').offset().top;if(cs+$('.compare-fix-header').height()>cwh+cwot){$('.compare-fix-header').addClass('to-bottom');}else{$('.compare-fix-header').removeClass('to-bottom');}});}
if($('.js-section-list-short').length&&$('.js-section-list-long').length){$('.js-section-list-short').append('<li style="margin-left: auto"><a href="" class="js-section-list-long-expand">Показать все</a></li>');$('.js-section-list-long').append('<li style="margin-left: auto"><a href="" class="js-section-list-short-expand">Скрыть</a></li>');$('.js-section-list-long-expand').click(function(e){e.preventDefault();e.stopPropagation();$('.js-section-list-short').css({display:'none'});$('.js-section-list-long').css({display:'flex'});});$('.js-section-list-short-expand').click(function(e){e.preventDefault();e.stopPropagation();$('.js-section-list-long').css({display:'none'});$('.js-section-list-short').css({display:'flex'});});}
$('.js-more-price-filters-toggle').click(function(e){e.preventDefault();e.stopPropagation();$(this).toggleClass('active');if($(this).hasClass('active')){this.innerHTML='⌃ Скрыть';}else{this.innerHTML='⌄ Показать все';}});const $headerTopMenu=document.querySelector('.header-top-menu');if($headerTopMenu){let headerTopMenuOpened=false;const $headerBottom=document.querySelector('.header-bottom');const $headerTopMenuBody=$headerTopMenu.querySelector('.header-top-menu__body');const $headerTopMenuBodyContainer=$headerTopMenu.querySelector('.header-top-menu__body-container');const $button=$headerTopMenu.querySelector('.header-top-menu__burger-button');$headerTopMenuBody.style.bottom=`-${$headerBottom.offsetHeight}px`;window.addEventListener('resize',()=>{$headerTopMenuBody.style.bottom=`-${$headerBottom.offsetHeight}px`;});const closeHeaderTopMenu=()=>{headerTopMenuOpened=false;$button.classList.remove('header-top-menu__burger-button--active');$headerTopMenuBody.style.height='0px';setTimeout(()=>{if(!headerTopMenuOpened)$headerTopMenuBodyContainer.style.display='none';},250);};const openHeaderTopMenu=()=>{headerTopMenuOpened=true;$button.classList.add('header-top-menu__burger-button--active');$headerTopMenuBodyContainer.style.display='block';$headerTopMenuBody.style.height=`${$headerTopMenuBodyContainer.offsetHeight}px`;document.addEventListener('scroll',closeHeaderTopMenu,{once:true});};$button.addEventListener('click',()=>{if(headerTopMenuOpened){closeHeaderTopMenu();}else{openHeaderTopMenu();}});}
const timeId=setInterval(()=>{const $wsChat=document.querySelector('.ws-chat');if($wsChat){clearInterval(timeId);let animated=false;let buttonHidden=false;const $btnContainer=$wsChat.querySelector('.ws-chat-btn-container');const $btnTitle=$btnContainer.querySelector('.ws-btn-title');if($btnTitle){$btnTitle.style['whiteSpace']='nowrap';$btnTitle.style['padding-left']='0';$btnTitle.style['padding-right']='0';$btnTitle.style['margin-left']='14px';$btnTitle.style['margin-right']='14px';$btnTitle.style['width']='calc(100% - 46px)';$btnTitle.style['overflow']='hidden';}
const $button=document.createElement('button');const hideWsChat=()=>{if(!animated){animated=true;buttonHidden=true;$btnContainer.style.width=$btnContainer.offsetWidth+'px';$btnContainer.style.minWidth='unset';$btnContainer.style.transition='width 0.2s ease-in-out';$button.classList.add('ws-chat__hidden-button--active');$btnContainer.dataset.initialWidth=$btnContainer.offsetWidth;setTimeout(()=>{$btnContainer.style.width='46px';setTimeout(()=>{animated=false;},200);},10);}};const showWsChat=()=>{if(!animated){animated=true;buttonHidden=false;let widthValue=$btnContainer.dataset.initialWidth;$button.classList.remove('ws-chat__hidden-button--active');setTimeout(()=>{$btnContainer.style.width=`${widthValue}px`;setTimeout(()=>{animated=false;$btnContainer.style.width='auto';},200);},10);}};const initWsChatHiddenButton=()=>{$button.setAttribute('type','button');$button.classList.add('ws-chat__hidden-button');$button.addEventListener('click',(e)=>{e.stopPropagation();if(buttonHidden)showWsChat();else hideWsChat();});$wsChat.querySelector('.ws-chat-btn-container').insertAdjacentElement('beforeend',$button);};if($btnContainer.offsetWidth>100){initWsChatHiddenButton();}}},100);const $catalogSection=document.querySelector('.catalog_section');if($catalogSection&&document.querySelector('#dialogs-data')){dialog=new Dialog($catalogSection);}
$(document).on('submit','.popup_callback_header',function(e){e.preventDefault();e.stopPropagation();var phone=$(this).find('input[name=phone]').val();if(phone.replace(/\D+/g,'').length<11){alert('Введите корректный номер телефона!');return false;}
$.ajax('/bitrix/services/ajax_callback.php',{method:'POST',data:$(this).serializeArray()}).done(function(result){$('.js-callback-wrapper').html(result);$.ajax('/bitrix/services/ajax_captcha.php',{dataType:'json'}).done(function(result){$('.give_phone_header img').attr('src',result.image);$('.give_phone_header input[name=captcha_code]').val(result.code);$('.give_phone_header').removeClass('js-captcha-not-initialized');});});});$('.js-remind-form').submit(function(e){var obj={id:$(this).find('input[name=goods_id]').val(),name:$(this).find('input[name=name]').val(),email:$(this).find('input[name=email]').val(),};$.ajax({url:window.ajax_path+'/ajax_add_subscriber.php',dataType:'text',data:obj,async:false,type:'post',success:function(ans){if(ans!='ok'){alert(ans);}else{alert('Спасибо! Как только товар появится в наличии, мы сообщим вам.');}},});return false;});$('.js-preorder-form').submit(function(e){console.log(e);e.preventDefault();var obj={name:$(this).find('input[name=name_to_order]').val(),phone:$(this).find('input[name=phone_to_order]').val(),ref:$(this).find('input[name=input_add_code]').val(),goods:$(this).find('input[name=input_add_goods]').val(),action:'goods_to_order',};$.ajax({url:window.ajax_path+'/ajax_goods_to_order.php',dataType:'text',data:obj,async:false,type:'post',success:function(){$('#modalPreorder .close-modal').click();alert('Спасибо за предзаказ! Информация уже у нас. Как только товар появится в наличии, мы свяжемся с вами и оформим заказ.');},});return false;});