'use strict';function init_tippys(){tippy('[data-tippy-content]',{allowHTML:true,theme:'light-border',});var popover_links_access=$('.js-popover a[href*="/access_shipment/"]:not(.ajax-popover-link)');if(popover_links_access.length){popover_links_access.addClass('ajax-popover-link');tippy(popover_links_access.toArray(),{allowHTML:true,content:'Загрузка...',theme:'light-border',followCursor:true,placement:'bottom-start',arrow:false,flipOnUpdate:true,onCreate(instance){instance.isRequested=false;},onShow(instance){if(instance.isRequested){return;}else{instance.isRequested=true;}
var url=instance.reference.href.split('/access_shipment/').pop().split('.html').shift();$.get(window.ajax_path+'/ajax_popover_tooltip_access.php',{code:url},function(content){instance.setContent(content);},'html');},});}
var popover_links_goods=$('.js-popover a[href*="/shipment/"]:not(.ajax-popover-link)');if(popover_links_goods.length){popover_links_goods.addClass('ajax-popover-link');tippy(popover_links_goods.toArray(),{allowHTML:true,content:'Загрузка...',theme:'light-border',followCursor:true,placement:'bottom-start',arrow:false,flipOnUpdate:true,onCreate(instance){instance.isRequested=false;},onShow(instance){if(instance.isRequested){return;}else{instance.isRequested=true;}
var url=instance.reference.href.split('/shipment/').pop().split('.html').shift();$.get(window.ajax_path+'/ajax_popover_tooltip_goods.php',{code:url},function(content){instance.setContent(content);},'html');},});}}
function update_header_cart(){$.ajax('/bitrix/services/ajax_small_basket.php').done(function(response){$('.js-header-cart').html(response);});}
function show_product_modal(productId){let addProduct=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var dataModal='modalCart';$.ajax('/bitrix/services/ajax_product_cart.php',{data:{productId:productId,},dataType:'html',}).done(function(result){let modal=$('#'+dataModal);modal.find('.js-product-modal').html(result);init_tippys();$('.phone-input').inputmask({mask:'+7 (999) 999-99-99'});modal.css({display:'block'});$('body').css({'overflow-y':'hidden'});if(addProduct){if(!modal.find('.js-offer-row-cart .js-product-cart-change input:checked').length){if(modal.find('.js-offer-row-cart[data-offer-id="'+addProduct+'"]').length){modal.find('.js-offer-row-cart[data-offer-id="'+addProduct+'"] .js-product-cart-change').click();}else{modal.find('.js-offer-row-cart').first().find('.js-product-cart-change').click();}}}});}
function addToBasket(offerId,showModal=false){var data={id:offerId,};var soloway_need_event=false;if(showModal){var active_rows_count=$('.js-product-modal .js-offer-row-cart.active').length;if(!active_rows_count)soloway_need_event=true;}else{soloway_need_event=true;}
if(showModal)$('#modalCart .product-modal-loader').addClass('active');$.ajax({url:'/bitrix/services/ajax_add_to_cart.php',dataType:'json',data:data,async:false,type:'post',success:function(response){if(!response.productId){alert('Произошла ошибка');}else{if(showModal){show_product_modal(response.productId);}
update_header_cart();var _tmr=window._tmr||(window._tmr=[]);_tmr.push({type:'reachGoal',id:'3186892',value:response.price,goal:'addToCart',params:{product_id:response.productId},});if(typeof DSPCounter!=='undefined'&&soloway_need_event){DSPCounter('send',{sz:'add_basket',sid:225445,custom:{10:response.productId,},});}
var vk_event=setInterval(function(){if(typeof VK==='object'){clearInterval(vk_event);VK.Retargeting.ProductEvent(window.PRICE_LIST_ID,'add_to_cart',{products:[{id:response.productId,price:response.price,price_from:true}],});}},150);var dataLayer=window.dataLayer||[];dataLayer.push({ecommerce:{add:{products:[{id:String(response.productId),quantity:1,},],},},});if(typeof yaCounter25850102!=='undefined'){yaCounter25850102.reachGoal('add_to_cart');}}},});}
function incInBasket(offerId,showModal=false){var data={id:offerId,};if(showModal)$('#modalCart .product-modal-loader').addClass('active');$.ajax({url:'/bitrix/services/ajax_add_to_cart.php',dataType:'json',data:data,async:false,type:'post',success:function(response){if(!response.productId){alert('Произошла ошибка');}else{if(showModal){show_product_modal(response.productId);}
update_header_cart();var _tmr=window._tmr||(window._tmr=[]);_tmr.push({type:'reachGoal',id:'3186892',value:response.price,goal:'addToCart',params:{product_id:response.productId},});if(typeof DSPCounter!=='undefined'){DSPCounter('send',{sz:'add_basket',sid:225445,custom:{10:response.productId,},});}
var vk_event=setInterval(function(){if(typeof VK==='object'){clearInterval(vk_event);VK.Retargeting.ProductEvent(window.PRICE_LIST_ID,'add_to_cart',{products:[{id:response.productId,price:response.price,price_from:true}],});}},150);var dataLayer=window.dataLayer||[];dataLayer.push({ecommerce:{add:{products:[{id:String(response.productId),quantity:1,},],},},});if(typeof yaCounter25850102!=='undefined'){yaCounter25850102.reachGoal('add_to_cart');}}},});}
function removeFromBasket(offerId,showModal=false){var data={id:offerId,};var soloway_need_event=false;if(showModal){var active_rows_count=$('.js-product-modal .js-offer-row-cart.active').length;if(!active_rows_count)soloway_need_event=true;}else{soloway_need_event=true;}
if(showModal)$('#modalCart .product-modal-loader').addClass('active');$.ajax({url:'/bitrix/services/ajax_remove_from_cart.php',dataType:'json',data:data,async:false,type:'post',success:function(response){if(!response.productId){alert('Произошла ошибка');}else{if(showModal){show_product_modal(response.productId);}
update_header_cart();if(typeof DSPCounter!=='undefined'&&soloway_need_event){DSPCounter('send',{sz:'del_basket',sid:225445,custom:{10:response.productId,},});}}},});}
function decInBasket(offerId,showModal=false){var data={id:offerId,};if(showModal)$('#modalCart .product-modal-loader').addClass('active');$.ajax({url:'/bitrix/services/ajax_dec_to_cart.php',dataType:'json',data:data,async:false,type:'post',success:function(response){if(!response.productId){alert('Произошла ошибка');}else{if(showModal){show_product_modal(response.productId);}
update_header_cart();}},});}
$(document).on('click','.js-show-product-modal',function(e){e.preventDefault();show_product_modal($(this).data('product-id'),$(this).data('product-id'));return;});$(document).on('click','.js-product-cart-change',function(e){e.preventDefault();var product_row=$(this).closest('.js-offer-row-cart');var offerId=product_row.data('offer-id');if(product_row.hasClass('active')){removeFromBasket(offerId,true);}else{addToBasket(offerId,true);}});$(document).on('click','.js-product-qty-change',function(e){e.preventDefault();var product_row=$(this).closest('.js-offer-row-cart');var offerId=product_row.data('offer-id');if($(this).hasClass('js-product-qty-change-dec')){decInBasket(offerId,true);}else{incInBasket(offerId,true);}});$(document).on('click','.catalog-mega-menu .mm-main .categories-main li a',function(e){if(!$(this).hasClass('no-child')){e.preventDefault();var i=$(this).parent().index();var httt=$(this).parent().html();var ttt=$(this).text();$('.catalog-mega-menu .mm-main .categories-main li.active').removeClass('active');$(this).parent().addClass('active');$('.cat-list').removeClass('active').eq(i).addClass('active');$('.catalog-mega-menu .mm-main .d-flex > .col:last-child .col-title').html(httt);$('.catalog-mega-menu .mm-main .d-flex > .col:last-child .col-title a').text(ttt);$('.catalog-mega-menu .mm-main .d-flex > .col:last-child').addClass('open');if($(window).width()<768){if($('.cat-list.active > ul').data('masonry')){$('.cat-list.active > ul').masonry('destroy');}}else{$('.cat-list.active > ul').masonry({columnWidth:'.grid-sizer',itemSelector:'.grid-item',percentPosition:true,});}}});$(document).on('click','.catalog-mega-menu .mm-main .d-flex > .col:last-child .col-title',function(params){if($('.has-child ul.open').length>0){var tt=$('.categories-main .active a').text();$(this).text(tt);$('.has-child ul.open').removeAttr('style');$('.has-child ul.open').removeClass('open');$('.catalog-mega-menu .mm-main .categories-child').css('overflow-y','auto');}else{$(this).parents('.col').removeClass('open');}});$(document).on('click','.has-child > a',function name(e){if($(window).width()<768){e.preventDefault();let ul=$(this).siblings('ul');ul.addClass('open');ul.css('top',ul.parent().parent().scrollTop()+'px');var t=$(this).text();$(this).parents('.col').find('.col-title').text(t);$('.catalog-mega-menu .mm-main .categories-child').css('overflow-y','hidden');}else{$('.catalog-mega-menu .mm-main .categories-child').css('overflow-y','auto');}});$(document).on('click','.close-modal, .modal-sandbox',function(){$('.modal').scrollTop(0).css({display:'none'});$('body').css({'overflow-y':'auto'});});$(document).on('click','.close-menu',function(e){e.preventDefault();$('body').removeClass('no-scroll');$('.catalog-mega-menu').fadeOut('fast');});$(document).on('click','.btn-catalog',function(e){e.preventDefault();$('body').addClass('no-scroll');$('.catalog-mega-menu').fadeIn('fast');if($(window).width()<768){if($('.cat-list.active > ul').data('masonry')){$('.cat-list.active > ul').masonry('destroy');}}else{$('.cat-list.active > ul').masonry({columnWidth:'.grid-sizer',itemSelector:'.grid-item',percentPosition:true,});}});var MD5=function(r){function n(r){for(var n,t='0123456789ABCDEF',e='',u=0;u<r.length;u++){(n=r.charCodeAt(u)),(e+=t.charAt((n>>>4)&15)+t.charAt(15&n));}
return e;}
function t(r){for(var n=Array(r.length>>2),t=0;t<n.length;t++){n[t]=0;}
for(t=0;t<8*r.length;t+=8){n[t>>5]|=(255&r.charCodeAt(t/8))<<t%32;}
return n;}
function e(r){for(var n='',t=0;t<32*r.length;t+=8){n+=String.fromCharCode((r[t>>5]>>>t%32)&255);}
return n;}
function u(r,n){(r[n>>5]|=128<<n%32),(r[14+(((n+64)>>>9)<<4)]=n);for(var t=1732584193,e=-271733879,u=-1732584194,o=271733878,g=0;g<r.length;g+=16){var v=t,l=e,A=u,C=o;(e=i((e=i((e=i((e=i((e=c((e=c((e=c((e=c((e=a((e=a((e=a((e=a((e=f((e=f((e=f((e=f(e,(u=f(u,(o=f(o,(t=f(t,e,u,o,r[g+0],7,-680876936)),e,u,r[g+1],12,-389564586)),t,e,r[g+2],17,606105819)),o,t,r[g+3],22,-1044525330)),(u=f(u,(o=f(o,(t=f(t,e,u,o,r[g+4],7,-176418897)),e,u,r[g+5],12,1200080426)),t,e,r[g+6],17,-1473231341)),o,t,r[g+7],22,-45705983)),(u=f(u,(o=f(o,(t=f(t,e,u,o,r[g+8],7,1770035416)),e,u,r[g+9],12,-1958414417)),t,e,r[g+10],17,-42063)),o,t,r[g+11],22,-1990404162)),(u=f(u,(o=f(o,(t=f(t,e,u,o,r[g+12],7,1804603682)),e,u,r[g+13],12,-40341101)),t,e,r[g+14],17,-1502002290)),o,t,r[g+15],22,1236535329)),(u=a(u,(o=a(o,(t=a(t,e,u,o,r[g+1],5,-165796510)),e,u,r[g+6],9,-1069501632)),t,e,r[g+11],14,643717713)),o,t,r[g+0],20,-373897302)),(u=a(u,(o=a(o,(t=a(t,e,u,o,r[g+5],5,-701558691)),e,u,r[g+10],9,38016083)),t,e,r[g+15],14,-660478335)),o,t,r[g+4],20,-405537848)),(u=a(u,(o=a(o,(t=a(t,e,u,o,r[g+9],5,568446438)),e,u,r[g+14],9,-1019803690)),t,e,r[g+3],14,-187363961)),o,t,r[g+8],20,1163531501)),(u=a(u,(o=a(o,(t=a(t,e,u,o,r[g+13],5,-1444681467)),e,u,r[g+2],9,-51403784)),t,e,r[g+7],14,1735328473)),o,t,r[g+12],20,-1926607734)),(u=c(u,(o=c(o,(t=c(t,e,u,o,r[g+5],4,-378558)),e,u,r[g+8],11,-2022574463)),t,e,r[g+11],16,1839030562)),o,t,r[g+14],23,-35309556)),(u=c(u,(o=c(o,(t=c(t,e,u,o,r[g+1],4,-1530992060)),e,u,r[g+4],11,1272893353)),t,e,r[g+7],16,-155497632)),o,t,r[g+10],23,-1094730640)),(u=c(u,(o=c(o,(t=c(t,e,u,o,r[g+13],4,681279174)),e,u,r[g+0],11,-358537222)),t,e,r[g+3],16,-722521979)),o,t,r[g+6],23,76029189)),(u=c(u,(o=c(o,(t=c(t,e,u,o,r[g+9],4,-640364487)),e,u,r[g+12],11,-421815835)),t,e,r[g+15],16,530742520)),o,t,r[g+2],23,-995338651)),(u=i(u,(o=i(o,(t=i(t,e,u,o,r[g+0],6,-198630844)),e,u,r[g+7],10,1126891415)),t,e,r[g+14],15,-1416354905)),o,t,r[g+5],21,-57434055)),(u=i(u,(o=i(o,(t=i(t,e,u,o,r[g+12],6,1700485571)),e,u,r[g+3],10,-1894986606)),t,e,r[g+10],15,-1051523)),o,t,r[g+1],21,-2054922799)),(u=i(u,(o=i(o,(t=i(t,e,u,o,r[g+8],6,1873313359)),e,u,r[g+15],10,-30611744)),t,e,r[g+6],15,-1560198380)),o,t,r[g+13],21,1309151649)),(u=i(u,(o=i(o,(t=i(t,e,u,o,r[g+4],6,-145523070)),e,u,r[g+11],10,-1120210379)),t,e,r[g+2],15,718787259)),o,t,r[g+9],21,-343485551)),(t=h(t,v)),(e=h(e,l)),(u=h(u,A)),(o=h(o,C));}
return Array(t,e,u,o);}
function o(r,n,t,e,u,o){return h(g(h(h(n,r),h(e,o)),u),t);}
function f(r,n,t,e,u,f,a){return o((n&t)|(~n&e),r,n,u,f,a);}
function a(r,n,t,e,u,f,a){return o((n&e)|(t&~e),r,n,u,f,a);}
function c(r,n,t,e,u,f,a){return o(n^t^e,r,n,u,f,a);}
function i(r,n,t,e,u,f,a){return o(t^(n|~e),r,n,u,f,a);}
function h(r,n){var t=(65535&r)+(65535&n);return(((r>>16)+(n>>16)+(t>>16))<<16)|(65535&t);}
function g(r,n){return(r<<n)|(r>>>(32-n));}
var v;return n(e(u(t(r),8*r.length))).toLowerCase();};function resizeSlick(e,slick){let oldHeight=slick.$slideTrack.outerHeight().toString()+'px';let height=0;slick.$slideTrack.find('.slick-slide.slick-active').each(function(){let item=$(this.children[0]);item.css('height','auto');let itemHeight=item.outerHeight();if(height<itemHeight)height=itemHeight;item.css('height',oldHeight);});height=height.toString()+'px';slick.$slideTrack.animate({height:height},150);slick.$slideTrack.find('.slick-slide').each(function(){$(this.children[0]).animate({height:height},150);});}
function equalizeHomeSliders($mainSlider,$secondarySlider){if(!$mainSlider.length&&!$secondarySlider.length)return;let $mainSliderList=[];let $mainSlides=[];let mainPreviousHeight=0;let mainSliderHeight=0;if($mainSlider.length){$mainSlides=$mainSlider.find('.slick-slide');$mainSliderList=$mainSlider.find('.slick-list');if($mainSliderList.length)mainPreviousHeight=$mainSliderList.height();if($mainSlides.length){$mainSlides.height('auto');$mainSlides.each(function(i,slide){if(mainSliderHeight<slide.offsetHeight)mainSliderHeight=slide.offsetHeight;});}}
let $secondarySliderList=[];let $secondarySlides=[];let secondaryPreviousHeight=0;let secondarySliderHeight=0;if($secondarySlider.length){$secondarySlides=$secondarySlider.find('.slick-slide');$secondarySliderList=$secondarySlider.find('.slick-list');if($secondarySliderList.length)secondaryPreviousHeight=$secondarySliderList.height();if($secondarySlides.length){$secondarySlides.height('auto');$secondarySlides.filter('.slick-active').each(function(i,slide){if(secondarySliderHeight<slide.offsetHeight)secondarySliderHeight=slide.offsetHeight;});}}
if(window.innerWidth>1199){if(mainSliderHeight>secondarySliderHeight){secondarySliderHeight=mainSliderHeight;}else{mainSliderHeight=secondarySliderHeight;}}
if(mainSliderHeight>0){if(mainPreviousHeight>0&&mainSliderHeight!=mainPreviousHeight){$mainSlides.height(mainPreviousHeight);$mainSliderList.height(mainPreviousHeight);$mainSlides.animate({height:mainSliderHeight},150);$mainSliderList.animate({height:mainSliderHeight},150);}else{$mainSlides.height(mainSliderHeight);$mainSliderList.height(mainSliderHeight);}}
if(secondarySliderHeight>0){if(secondaryPreviousHeight>0&&secondarySliderHeight!=secondaryPreviousHeight){$secondarySlides.height(secondaryPreviousHeight);$secondarySliderList.height(secondaryPreviousHeight);$secondarySlides.animate({height:secondarySliderHeight},150);$secondarySliderList.animate({height:secondarySliderHeight},150);}else{$secondarySlides.height(secondarySliderHeight);$secondarySliderList.height(secondarySliderHeight);}}}
$.fn.inputFilter=function(inputFilter){return this.on('input keydown keyup mousedown mouseup select contextmenu drop',function(){if(inputFilter(this.value)){this.oldValue=this.value;this.oldSelectionStart=this.selectionStart;this.oldSelectionEnd=this.selectionEnd;}else if(this.hasOwnProperty('oldValue')){this.value=this.oldValue;this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd);}else{this.value='';}});};function quickOrder(form){var wrapper=form.find('.fast-order__wrapper');var inp_phone=form.find('input[name="input_add_phone"]').val();var phone=inp_phone.replace(/\D+/gm,'');if(wrapper.hasClass('fast-order__wrapper--captcha')){var captcha=form.find('input[name="captcha_word"]').val().replace(/[^0-9a-zA-Z]+/gm,'');if(captcha.length<5){form.find('input[name="captcha_word"]').css('border','2px solid red').focus();}else{var goods=form.find('input[name="input_add_goods"]').val();var modal=form.closest('.js-product-modal');var pic=modal.find('.thumb img').attr('src');if(pic)pic='https://video-shoper.ru'+pic;var product_id=modal.find('.kompl-row').first().data('offer-id');var price=parseInt(modal.find('.kompl-row').first().find('.price .current').text().replace(/\D+/,''));var title=modal.find('.prod-row .title').text();var obj={ref:form.find('input[name="input_add_code"]').val(),phone:inp_phone,goods:goods,fuser:form.find('input[name="input_add_fuser"]').val(),captcha_word:captcha,captcha_code:form.find('input[name="captcha_code"]').val(),};$.ajax({url:'/bitrix/services/ajax_quick_order.php',dataType:'text',data:obj,async:false,type:'post',success:function(ans){if(ans!=parseInt(ans).toString()){alert(ans);}else{var _tmr=window._tmr||(window._tmr=[]);_tmr.push({type:'reachGoal',id:'3186892',value:price.toString(),goal:'purchase',params:{product_id:goods,},});var vk_event=setInterval(function(){if(typeof VK==='object'){clearInterval(vk_event);var eventParams={products:[{id:goods,price:price.toString(),price_from:true},]};VK.Retargeting.ProductEvent(window.PRICE_LIST_ID,'init_checkout',eventParams);VK.Retargeting.ProductEvent(window.PRICE_LIST_ID,'add_payment_info',eventParams);eventParams.total_price=price.toString();VK.Retargeting.ProductEvent(window.PRICE_LIST_ID,'purchase',eventParams);}},150);if(typeof yaCounter25850102!=='undefined'){yaCounter25850102.reachGoal('buy1click');}
window.flocktory=window.flocktory||[];window.flocktory.push(['postcheckout',{user:{email:phone+'@unknown.email',},order:{id:'1click'+ans,price:price,custom_field:ADMITAD.Invoice.broker,items:[{id:product_id,title:title,price:price,image:pic,count:1,},],},spot:'1click',},]);if(typeof DSPCounter!=='undefined'){DSPCounter('send',{sz:'order',sid:225445,custom:{10:goods,150:'1click'+ans,151:price,158:MD5(phone),},});}
$('footer.footer').prev().append('<div class="i-flocktory" data-fl-action="exchange" data-fl-spot="1click" data-fl-user-email="'+
phone+
'@unknown.email"></div>');setTimeout(function(){$('.modal').scrollTop(0).css({display:'none'});$('body').css({'overflow-y':'auto'});alert('Спасибо за заказ! Наш менеджер свяжется с Вами в ближайшее время.');},200);update_header_cart();}},});}}else{if(phone.length<11){form.find('input[name="input_add_phone"]').css('border','2px solid red').focus();}else{$.ajax('/bitrix/services/ajax_captcha.php',{dataType:'json'}).done(function(result){wrapper.find('img').attr('src',result.image);form.find('input[name=captcha_code]').val(result.code);wrapper.addClass('fast-order__wrapper--captcha');form.find('input[name="captcha_word"]').focus();});}}}
function appendDots(elem,toshow){var dotsCount=elem.find('.item').length;var dots=$('<div></div>',{class:'slick-dots','data-item-count':dotsCount,});for(let index=0;index<dotsCount;index++){var dot=$('<div></div>',{class:'dot',}).html('<button></button>');dots.append(dot);}
elem.after(dots);var slickDots=dots.slick({accessibility:false,speed:300,arrows:false,dots:false,slidesToShow:3,slidesToScroll:1,centerMode:true,centerPadding:0,focusOnSelect:true,asNavFor:elem,});slickDots.on('beforeChange',function(event,slickDots,currentSlide,nextSlide){if(nextSlide==0){var cls='slick-current slick-active slick-center';setTimeout(function(){dots.find('[data-slick-index="'+slickDots.$slides.length+'"]').addClass(cls).siblings().removeClass(cls);for(var i=slickDots.options.slidesToShow-3;i>=0;i--){dots.find('[data-slick-index="'+i+'"]').addClass(cls);}},10);}
if(nextSlide===slickDots.$slides.length-1){var cls='slick-current slick-active slick-center';setTimeout(function(){dots.find('[data-slick-index="'+nextSlide+'"]').addClass(cls).siblings().removeClass(cls);for(var i=-1;i>=-1*1;i--){dots.find('[data-slick-index="'+i+'"]').addClass(cls);}},10);}});}
function checkCompareSlider(params){var sl=$('.compare-wrap > .compare-list .item').length;var $slickElement=$('.compare-list');$slickElement.on('init reInit afterChange',function(event,slick,currentSlide,nextSlide){var i=(currentSlide?currentSlide:0)+1;var i2=i+1;if(i2>slick.slideCount){i2=1;}
$('.compare-wrap .slider-action .count').text(i+','+i2+' из '+slick.slideCount);});if($(window).width()>1199&&sl>4){$slickElement.slick({accessibility:false,slidesToShow:4,slidesToScroll:1,dots:false,infinite:true,speed:300,accessibility:false,nextArrow:'<button class="slick-next"><i class="icon-CaretRight"></i></button>',prevArrow:'<button class="slick-prev"><i class="icon-CaretLeft"></i></button>',responsive:[{breakpoint:1600,settings:{slidesToShow:4,},},{breakpoint:767,settings:{slidesToShow:2,slidesToScroll:2,},},],});}
if($(window).width()>1023&&$(window).width()<1200&&sl>3){$slickElement.slick({accessibility:false,slidesToShow:3,slidesToScroll:1,dots:false,infinite:true,speed:300,accessibility:false,nextArrow:'<button class="slick-next"><i class="icon-CaretRight"></i></button>',prevArrow:'<button class="slick-prev"><i class="icon-CaretLeft"></i></button>',});}
if($(window).width()<1024&&sl>2){$slickElement.slick({accessibility:false,slidesToShow:2,slidesToScroll:1,dots:false,infinite:true,speed:300,accessibility:false,nextArrow:'<button class="slick-next"><i class="icon-CaretRight"></i></button>',prevArrow:'<button class="slick-prev"><i class="icon-CaretLeft"></i></button>',});}
if($(window).width()<767&&sl>2){$('.compare-wrap .slider-action').css('display','flex');}else{$('.compare-wrap .slider-action').css('display','none');}
$('.compare-wrap .slider-action .prev, .compare-fix-header .slick-prev').on('click',function name(params){$slickElement.slick('slickPrev');});$('.compare-wrap .slider-action .next, .compare-fix-header .slick-next').on('click',function name(params){$slickElement.slick('slickNext');});}
$(window).resize(function(params){checkCompareSlider();if($(window).width()<768){if(!$('.list-of-sets').parent().is('.product-main__cols .col:first-child'))
$('.list-of-sets').appendTo('.product-main__cols .col:first-child');}else{if(!$('.list-of-sets').parent().is('.product-main__cols .col:last-child'))
$('.list-of-sets').appendTo('.product-main__cols .col:last-child');}});function shuffle(array){array.sort(()=>Math.random()-0.5);}
function elemInViewport(elem){const box=elem.getBoundingClientRect();const top=box.top;const left=box.left;const bottom=box.bottom;const right=box.right;const width=document.documentElement.clientWidth;const height=document.documentElement.clientHeight;const maxWidth=(right-left)*0.7;const maxHeight=(bottom-top)*0.7;return(Math.min(height,bottom)-Math.max(0,top)>=maxHeight&&Math.min(width,right)-Math.max(0,left)>=maxWidth&&top>0?true:false);}
function getVisibleElements(listOfElements){const result=[];for(const $item of listOfElements){if(elemInViewport($item))result.push($item);}
return result;}
let dialog;class Dialog{constructor($catalogSection){this.$catalogSection=$catalogSection;this.data=null;this.currentDialog=null;this.numDialogOfData=0;this.isFirstDialog=true;this.nowDialog=false;this.firstShowStopTime=15000;this.notFirstShowStopTime=15000;this.hideDialogAfterEndTime=2000;this.oneMessageTime=4000;this.durationAnimtaionShowAndHide=200;this.initialization();}
initialization(){this.loadData();shuffle(this.data);this.initTimerStopingScroll();}
start(){this.nowDialog=true;this.isFirstDialog=false;this.updateProductItems();if(this.$productItem1&&this.$productItem2){this.initDialogItems();let nextDialogNum=0;this.dialogIntervalTimer=setInterval(()=>{if(nextDialogNum==0&&this.$dialog1.currentMessageNum<this.$dialog1.messageItems.length-1){this.nextMessage(this.$dialog1);nextDialogNum=1;}else if(this.$dialog2.currentMessageNum<this.$dialog2.messageItems.length-1){this.nextMessage(this.$dialog2);nextDialogNum=0;}else{setTimeout(()=>{this.stop();},this.hideDialogAfterEndTime);clearInterval(this.dialogIntervalTimer);}},this.oneMessageTime);}else{setTimeout(()=>{this.start();},this.hideDialogAfterEndTime);}}
stop(){this.nowDialog=false;clearInterval(this.dialogIntervalTimer);if(this.$dialog1.$el){this.hideDialogEl(this.$dialog1.$el);}
if(this.$dialog2.$el){this.hideDialogEl(this.$dialog2.$el);}
this.initTimerStopingScroll();}
initTimerStopingScroll(){const time=this.isFirstDialog?this.firstShowStopTime:this.notFirstShowStopTime;this.timerStoping=setTimeout(()=>{this.start();this.isFirstDialog=false;},time);window.addEventListener('scroll',this.handlerStopScroll,{once:true,});}
handlerStopScroll(){if(dialog.nowDialog){dialog.stop();}else{clearTimeout(dialog.timerStoping);setTimeout(()=>{dialog.initTimerStopingScroll();},1000);}}
setNextDialog(){if(this.numDialogOfData==this.data.length-1)this.numDialogOfData=0;this.currentDialog=this.data[this.numDialogOfData++];}
insertDialogItems(){this.$productItem1.insertAdjacentElement('beforeend',this.$dialog1.$el);this.$productItem2.insertAdjacentElement('beforeend',this.$dialog2.$el);}
initDialogItems(){this.setNextDialog();this.$dialog1=this.getDialogObj('left','#E6DBFF',this.currentDialog.dialog.filter(($item)=>$item.numItem==1));this.$dialog2=this.getDialogObj('right','#FEDBFF',this.currentDialog.dialog.filter(($item)=>$item.numItem==2));this.$dialog1.$el.classList.add('dialog__wrapper--left');this.$dialog2.$el.classList.add('dialog__wrapper--right');this.insertDialogItems();}
showDialogEl($dialogItem){}
hideDialogEl($dialog){const tl=gsap.timeline();tl.to($dialog,{opacity:0,duration:this.durationAnimtaionShowAndHide/1000,},'frame-1');setTimeout(()=>{$dialog.remove();},this.durationAnimtaionShowAndHide);}
nextMessage($dialog){const tl=gsap.timeline();if($dialog.currentMessageNum!=-1){const $currentMessage=$dialog.messageItems[$dialog.currentMessageNum];const $nextMessage=$dialog.messageItems[++$dialog.currentMessageNum];tl.to($nextMessage,{display:'',opacity:0,duration:0,},'frame-init').to($currentMessage,{display:'',duration:0,},'frame-init');if($dialog==this.$dialog1){tl.to(this.$dialog2.messageItems[this.$dialog2.currentMessageNum],{opacity:0,duration:this.durationAnimtaionShowAndHide/1000,},'frame-1');}else{tl.to(this.$dialog1.messageItems[this.$dialog1.currentMessageNum],{opacity:0,duration:this.durationAnimtaionShowAndHide/1000,},'frame-1');}
tl.to($nextMessage,{opacity:1,duration:this.durationAnimtaionShowAndHide/1000,delay:this.durationAnimtaionShowAndHide/1000,},'frame-2').to($currentMessage,{opacity:0,duration:this.durationAnimtaionShowAndHide/1000,delay:this.durationAnimtaionShowAndHide/1000,},'frame-2').to($currentMessage,{display:'none',duration:0,delay:this.durationAnimtaionShowAndHide/1000,},'frame-end');}else{const $currentMessage=$dialog.messageItems[0];$dialog.currentMessageNum++;const tl=gsap.timeline();tl.to($currentMessage,{display:'',opacity:0,duration:0,},'frame-init');if($dialog==this.$dialog2){tl.to(this.$dialog1.messageItems[this.$dialog1.currentMessageNum],{opacity:0,duration:this.durationAnimtaionShowAndHide/1000,},'frame-1');}
tl.to($currentMessage,{opacity:1,duration:this.durationAnimtaionShowAndHide/1000,delay:this.durationAnimtaionShowAndHide/1000,},'frame-2');}}
loadData(){this.data=JSON.parse(document.querySelector('#dialogs-data').textContent).data;}
updateProductItems(){const visibleElements=getVisibleElements(this.$catalogSection.querySelectorAll('.product-item'));this.$productItem1=visibleElements[0];this.$productItem2=visibleElements[1];}
getDialogObj(state,colorHex,dialogData){const $el=document.createElement('div');$el.classList.add('dialog__wrapper');const messageItems=[];dialogData.forEach(($item,index)=>{const $message=document.createElement('div');$message.classList.add('dialog__message',state=='right'?'dialog__message--right':'dialog__message--left');$message.style.backgroundColor=colorHex;$message.style.display='none';$message.innerHTML=`<p class="dialog__message-text">${$item.text}</p><div class="dialog__message-decoration"><svg width="26" height="22" viewBox="0 0 26 22" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.90735e-06 21.5016C12.8901 23.9158 22.7042 16.9749 26 13.2027L25.6338 1.8861C22.0939 2.64055 14.4282 3.31954 12.0845 0C12.4507 13.5799 2.56338 20.3699 1.90735e-06 21.5016Z" fill="${colorHex}"/></svg></div>`;messageItems.push($message);$el.insertAdjacentElement('beforeend',$message);});return{$el:$el,messageItems:messageItems,currentMessageNum:-1,};}}
$(document).on('click','.modal-trigger',function(e){e.preventDefault();if($(this).hasClass('js-modal-callback')&&$('.give_phone_header').hasClass('js-captcha-not-initialized')){var dataModal=$(this).attr('data-modal');$.ajax('/bitrix/services/ajax_captcha.php',{dataType:'json'}).done(function(result){$('.give_phone_header img').attr('src',result.image);$('.give_phone_header input[name=captcha_code]').val(result.code);$('.give_phone_header').removeClass('js-captcha-not-initialized');$('#'+dataModal).css({display:'block'});$('body').css({'overflow-y':'hidden'});});if(typeof yaCounter25850102!=='undefined'){yaCounter25850102.reachGoal('callback_form');}
return;}
var dataModal=$(this).attr('data-modal');$('#'+dataModal).css({display:'block'});$('body').css({'overflow-y':'hidden'});});$(document).on('submit','.js-quick-order',function(e){e.preventDefault();quickOrder($(this));});